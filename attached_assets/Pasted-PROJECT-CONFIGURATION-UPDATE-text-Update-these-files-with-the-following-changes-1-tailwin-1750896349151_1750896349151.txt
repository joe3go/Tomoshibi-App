PROJECT CONFIGURATION UPDATE

text

Update these files with the following changes:

1. tailwind.config.ts CHANGES
-----------------------------
// Add to extend section
fontFamily: {
  japanese: ['"Noto Sans JP"', '"Noto Serif JP"', "sans-serif"],
  serif: ['"Noto Serif JP"', '"Noto Sans JP"', "serif"],
},
lineHeight: {
  'ruby': '1.8',
},
fontSize: {
  'ruby-base': ['1rem', { lineHeight: '1.8' }],
  'ruby-annotation': ['0.6rem', { 
    lineHeight: '1.2',
    letterSpacing: '0.05em'
  }],
}

// Add to plugins section
addUtilities({
  '.ruby-support': {
    'font-feature-settings': "'pkna' 1, 'halt' 1",
    '-webkit-font-feature-settings': "'pkna' 1, 'halt' 1",
    'text-rendering': 'optimizeLegibility',
  },
  '@supports (-webkit-touch-callout: none)': {
    'ruby': { 
      '-webkit-ruby-position': 'before'
    },
    'rt': {
      '-webkit-text-combine': 'horizontal',
      'transform': 'translateY(-0.1em)'
    }
  }
});

FuriganaText.tsx IMPLEMENTATION

typescript

// Wrap component in ruby-support class
<div className="ruby-support">
  {/* Existing JSX */}
  <rt className="ruby-annotation text-muted-foreground">
    {t.reading}
  </rt>
</div>

globals.css IMPROVEMENTS

css

/* Add browser fixes */
@-moz-document url-prefix() {
  rt {
    font-size: 0.5em !important;
    transform: translateY(-0.6em) !important;
  }
}

.jt-ruby {
  ruby-position: over;
  line-height: inherit !important;
  vertical-align: top;
}

rt {
  font-family: "Noto Sans JP", sans-serif;
  text-underline-position: under;
}
TESTING INSTRUCTIONS


Verify font stack:

typescript

// Add temporary test component
function FontTest() {
  return (
    <div className="font-japanese">
      漢字 - かんじ (Kanji) <ruby>漢<rt>かん</rt>字<rt>じ</rt></ruby>
    </div>
  );
}

Check line heights:

css

/* Add visual indicator */
.jt-body {
  background-image: linear-gradient(to bottom, 
    transparent 95%, 
    rgba(255,0,0,0.1) 95%
  );
  background-size: 100% 1.8em;
}
IMPLEMENTATION NOTES


Preserve existing gold/red accent colors

Maintain Japanese theme styling

Keep all animation/UI effects intact

Prioritize vertical ruby positioning

Ensure Noto Japanese fonts load before other fonts

This configuration maintains your theme's visual identity while adding necessary Japanese typography support. The changes are compatible with:


Existing conversation bubbles

WanaKana integration

AVIF avatar formats

Theme color scheme

Mobile/responsive layouts

EXPECTED OUTCOME

Furigana should now render vertically above kanji with:


Proper 0.6em font size

Horizontal text combining (Safari)

-10% vertical offset (Firefox)

Optimal line spacing

Theme-consistent colors